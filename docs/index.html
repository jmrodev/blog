
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog SPA</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="mobile-header">
    <button id="menu-toggle" class="menu-btn">‚ò∞</button>
    <button id="theme-toggle" class="theme-btn">üåì</button>
  </div>
  <div class="layout">
    <aside class="sidebar">
      <nav>
        <h3>Art√≠culos</h3>
        <div id="nav-links">
          <!-- Los enlaces se generan din√°micamente o se insertan aqu√≠ -->
          <ul class="nav-list nav-level-0"><li class="nav-folder">
        <button class="nav-folder-toggle" data-target="folder-zg97qjj4" aria-expanded="false">articulos <span class="arrow">‚ñ∂</span></button>
        <div id="folder-zg97qjj4" class="nav-folder-children">
          <ul class="nav-list nav-level-1"><li class="nav-folder">
        <button class="nav-folder-toggle" data-target="folder-ronx9bcr" aria-expanded="false">avanzados <span class="arrow">‚ñ∂</span></button>
        <div id="folder-ronx9bcr" class="nav-folder-children">
          <ul class="nav-list nav-level-2"><li><a href="#" class="nav-link" data-article="articulos/avanzados/nvim">Neovim: Todo en uno</a></li></ul>
        </div>
      </li><li class="nav-folder">
        <button class="nav-folder-toggle" data-target="folder-2aloknoq" aria-expanded="false">basicos <span class="arrow">‚ñ∂</span></button>
        <div id="folder-2aloknoq" class="nav-folder-children">
          <ul class="nav-list nav-level-2"><li><a href="#" class="nav-link" data-article="articulos/basicos/css-grid">CSS Grid: El sistema de layout del futuro</a></li><li><a href="#" class="nav-link" data-article="articulos/basicos/javascript-modern">JavaScript Moderno: ES6+ y m√°s all√°</a></li></ul>
        </div>
      </li></ul>
        </div>
      </li><li class="nav-folder">
        <button class="nav-folder-toggle" data-target="folder-mfwas9bn" aria-expanded="false">enlaces <span class="arrow">‚ñ∂</span></button>
        <div id="folder-mfwas9bn" class="nav-folder-children">
          <ul class="nav-list nav-level-1"></ul>
        </div>
      </li><li><a href="#" class="nav-link" data-article="portfolio">Sobre m√≠</a></li><li class="nav-folder">
        <button class="nav-folder-toggle" data-target="folder-a63qassg" aria-expanded="false">tutoriales <span class="arrow">‚ñ∂</span></button>
        <div id="folder-a63qassg" class="nav-folder-children">
          <ul class="nav-list nav-level-1"></ul>
        </div>
      </li></ul>
        </div>
      </nav>
    </aside>
    <main id="content">
      <div class="article-placeholder">
        <h1>Selecciona un art√≠culo</h1>
        <p>Haz clic en un t√≠tulo de la barra lateral para ver su contenido.</p>
      </div>
    </main>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.getElementById('nav-links');
      const content = document.getElementById('content');
      const menuToggle = document.getElementById('menu-toggle');
      const sidebar = document.querySelector('.sidebar');

      // Cargar contenido de art√≠culos
      navLinks.addEventListener('click', async (e) => {
        const link = e.target.closest('.nav-link');
        if (link) {
          e.preventDefault();
          document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
          link.classList.add('active');

          const articleId = link.getAttribute('data-article');
          try {
            const res = await fetch(`./${articleId}.html`);
            if (!res.ok) throw new Error(`Error ${res.status}`);
            const html = await res.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const mainContent = doc.querySelector('main');
            content.innerHTML = mainContent ? mainContent.innerHTML : '<p>Error al cargar el art√≠culo.</p>';
          } catch (error) {
            content.innerHTML = `<p>No se pudo cargar el art√≠culo. ${error.message}</p>`;
          }
        }

        // Desplegar/cerrar submen√∫s
        const folderToggle = e.target.closest('.nav-folder-toggle');
        if (folderToggle) {
          e.preventDefault();
          const targetId = folderToggle.getAttribute('data-target');
          const el = document.getElementById(targetId);
          if (el) {
            const isOpen = el.classList.toggle('open');
            folderToggle.setAttribute('aria-expanded', isOpen);
          }
        }
      });

      // Men√∫ hamburguesa
      menuToggle.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          sidebar.classList.toggle('open');
        } else {
          sidebar.classList.toggle('collapsed');
        }
      });

      // Ocultar sidebar al hacer clic en un enlace en m√≥vil
      navLinks.addEventListener('click', (e) => {
        if (window.innerWidth <= 768 && e.target.closest('.nav-link')) {
          sidebar.classList.remove('open');
        }
      });

      // Tema oscuro/claro
      const themeToggle = document.getElementById('theme-toggle');
      const body = document.body;
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        body.classList.add('dark-mode');
      }
      themeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        const isDark = body.classList.contains('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    });
  </script>
</body>
</html>
